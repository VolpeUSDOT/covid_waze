coord_map() + scale_colour_brewer(palette="BuPu", direction = -1) +
gp
View(dt)
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_brewer(palette="BuPu", direction = -1) +
gp
ggplotly(gp)
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_brewer(palette="BuPu", direction = -1)
gp
ggplotly(gp)
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = - sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_brewer(palette = "BuPu", direction = -1)
gp
ggplotly(gp)
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map()
gp
ggplotly(gp)
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_brewer(palette = "BuPu", direction = - 1)
gp
ggplotly(gp)
View(lasub)
gp <- dt %>%
filter(date == '2021-08-31' & sub_type = 'ACCIDENT_MAJOR')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_brewer(palette = "BuPu", direction = - 1)
gp
gp <- dt %>%
filter(date == '2021-08-31' & sub_type == 'ACCIDENT_MAJOR')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_brewer(palette = "BuPu", direction = - 1)
gp
ggplotly(gp)
gp <- dt %>%
filter(date == '2021-08-31' & sub_type == 'ACCIDENT_MAJOR')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(color = "gray70") +
coord_map() + scale_colour_brewer(palette = "BuPu", direction = - 1)
gp
ggplotly(gp)
sum(is.na(dt$sub_type))
is.na(dt$sub_type)
dt <- dall%>% left_join(lasub)
gp <- dt %>%
filter(date == '2021-08-31' & sub_type == 'ACCIDENT_MAJOR')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_brewer(palette = "BuPu", direction = - 1)
gp
ggplotly(gp)
gp <- dt %>%
filter(date == '2021-08-31' & sub_type == 'ACCIDENT_MAJOR')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_brewer(palette = "BuPu", direction = - 1) +
facet_wrap(~ sub_type)
gp
ggplotly(gp)
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_brewer(palette = "BuPu", direction = - 1) +
facet_wrap(~ sub_type)
gp
ggplotly(gp)
View(lasub)
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_brewer(palette = "BuPu", direction = - 1) +
facet_wrap(~ sub_type)
gp
sum(is.na(dt$sub_type))
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type)
ggplotly(gp)
library(RColorBrewer)
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type)
ggplotly(gp)
library(sf)
library(ggmap)
install.package(ggmap)
install.package("ggmap")
install.packages("ggmap")
library(ggmap)
nc <- st_read(system.file("shape/la.shp", package="sf"))
library(ggplot2)
library(sf)
system.file("shape/la.shp", package="sf")
la_map <- get_map(location = "Louisiana", zoom = 7)
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type)
gp
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + title(date)
gp
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(date)
gp
gp <- dt %>%
filter(date == '2021-08-31')  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle('2021-08-31')
gp
jessie_dr = 'C:/Users/Jessie.Yang.CTR/Downloads/2022 Projects/BTS Waze/'
# plot the data by county and date
la <- read.csv(file.path(jessie_dr, "LA_hurricane_processed.csv"))
file.path(jessie_dr, "LA_hurricane_processed.csv")
jessie_dr = 'C:/Users/Jessie.Yang.CTR/Downloads/2022 Projects/BTS Waze'
# plot the data by county and date
la <- read.csv(file.path(jessie_dr, "LA_hurricane_processed.csv"))
file.path(jessie_dr, "LA_hurricane_processed.csv")
jessie_dr = 'C:/Users/Jessie.Yang.CTR/Downloads/2022 Projects/BTS Waze/LA_hurricane_export'
jessie_dr = 'C:/Users/Jessie.Yang.CTR/Downloads/2022 Projects/BTS Waze'
# plot the data by county and date
la <- read.csv(file.path(jessie_dr, "LA_hurricane_export","LA_hurricane_processed.csv"))
for (y in date) {
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + title(y)
fp <- file.path(jessie_dr, paste0(y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png")
}
# Create a gif file
for (y in unique(dt$date)) {
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + title(y)
fp <- file.path(jessie_dr, paste0(y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png")
}
unique(dt$date)
unique(dt$date[!is.na(dt$date)])
# Create a gif file
for (y in unique(dt$date[!is.na(dt$date)])) {
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + title(y)
fp <- file.path(jessie_dr, paste0(y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png")
}
y = unique(dt$date[!is.na(dt$date)])[1
]
y
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + title(y)
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + title(paste0(y))
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + title(paste0(y))
paste0(y)
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(paste0(y))
fp <- file.path(jessie_dr, paste0(y, ".png"))
# Create a gif file
for (y in unique(dt$date[!is.na(dt$date)])) {
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(paste0(y))
fp <- file.path(jessie_dr, paste0(y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png")
}
library(magick)
install.packages("magick")
imgs <- list.files(jessie_dr, full.names = TRUE)
img_list <- lapply(imgs, image_read)
library(magick)
imgs <- list.files(jessie_dr, full.names = TRUE)
img_list <- lapply(imgs, image_read)
## join the images together
img_joined <- image_join(img_list)
imgs
img_list <- lapply(imgs, image_read)
img_list <- lapply(imgs[1:20])
img_list <- imgs[1:20]
## join the images together
img_joined <- image_join(img_list)
img_list <- lapply(imgs, image_read)
list.files(path=jessie_dr, pattern = '*.png', full.names = TRUE) %>%
image_read() %>% # reads each path file
image_join() %>% # joins image
image_animate(fps=4) %>% # animates, can opt for number of loops
image_write("FileName.gif") # write to current dir
# Create a gif file
for (y in unique(dt$date[!is.na(dt$date)])) {
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
#geom_polygon(data = dall, color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(paste0(y))
fp <- file.path(jessie_dr, paste0(as.character(y), ".png"))
ggsave(plot = gp,
filename = fp,
device = "png")
}
library(magick)
list.files(path=jessie_dr, pattern = '*.png', full.names = TRUE) %>%
image_read() %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 2) %>% # animates, can opt for number of loops
image_write(file.path(jessie_dr, "FileName.gif")) # write to current dir
paste0(as.character(y), ".png")
y
unique(dt$date[!is.na(dt$date)])
as.character(dt$date)
unique(as.character(dt$date))
# Create a gif file
for (y in unique(dt$date[!is.na(dt$date)])) {
gp <- dt %>%
filter(as.character(date) == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(paste0(y))
fp <- file.path(jessie_dr, paste0(y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png", width=5, height=4, dpi=300)
}
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(paste0(y))
# Create a gif file
for (y in unique(dt$date[!is.na(dt$date)])) {
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(paste0(y))
fp <- file.path(jessie_dr, paste0(y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png", width=5, height=4, dpi=300)
}
list.files(path=jessie_dr, pattern = '*.png', full.names = TRUE) %>%
image_read() %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 2) %>% # animates, can opt for number of loops
image_write(file.path(jessie_dr, "FileName.gif")) # write to current dir
list.files(path=jessie_dr, pattern = '*.png', full.names = TRUE) %>%
image_read() %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 0.5) %>% # animates, can opt for number of loops
image_write(file.path(jessie_dr, "FileName.gif")) # write to current dir
# Create a gif file
for (y in unique(dt$date[!is.na(dt$date)])) {
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(as.character(y))
fp <- file.path(jessie_dr, paste0(y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png", width=5, height=4, dpi=300)
}
y = unique(dt$date[!is.na(dt$date)])[1]
y
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(as.character(y))
fp <- file.path(jessie_dr, paste0(y, ".png"))
fp
gp
# Create a gif file
for (y in unique(dt$date[!is.na(dt$date)])) {
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(as.character(y))
fp <- file.path(jessie_dr, paste0(y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png", width=5, height=4, dpi=300)
}
# Create a gif file
for (y in as.character(unique(dt$date[!is.na(dt$date)]))) {
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(as.character(y))
fp <- file.path(jessie_dr, paste0(y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png", width=10, height=8, dpi=300)
}
library(magick)
list.files(path=jessie_dr, pattern = '*.png', full.names = TRUE) %>%
image_read() %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 0.5) %>% # animates, can opt for number of loops
image_write(file.path(jessie_dr, "FileName.gif")) # write to current dir
for (y in as.character(unique(dt$date[!is.na(dt$date)]))) {
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(paste0("All weather", y))
fp <- file.path(jessie_dr, paste0("All weather", y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png", width=10, height=8, dpi=300)
}
list.files(path=jessie_dr, pattern = 'All weather*.png', full.names = TRUE)
list.files(path=jessie_dr, pattern = '^All weather*.png', full.names = TRUE)
list.files(path=jessie_dr, pattern = 'All weather^*.png', full.names = TRUE)
list.files(path=jessie_dr, pattern = '^All weather', full.names = TRUE)
list.files(path=jessie_dr, pattern = '^All weather', full.names = TRUE) %>%
image_read() %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 0.5) %>% # animates, can opt for number of loops
image_write(file.path(jessie_dr, "All weather.gif")) # write to current dir
for (y in as.character(unique(dt$date[!is.na(dt$date)]))) {
gp <- dt %>%
filter(date == y)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(paste0("All type ", y))
fp <- file.path(jessie_dr, paste0("All type", y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png", width=10, height=8, dpi=300)
}
# make a gif using the png files
list.files(path=jessie_dr, pattern = '^All type', full.names = TRUE) %>%
image_read() %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 0.5) %>% # animates, can opt for number of loops
image_write(file.path(jessie_dr, "All type.gif")) # write to current dir
unique(la$sub_type) # 25 sub-types.
for (y in as.character(unique(dt$date[!is.na(dt$date)]))) {
subtype = "HAZARD_WEATHER_FLOOD"
gp <- dt %>%
filter(date == y & sub_type == subtype)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
facet_wrap(~ sub_type) + ggtitle(paste0(subtype," ", y))
fp <- file.path(jessie_dr, paste0(subtype," ", y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png", width=10, height=8, dpi=300)
}
# make a gif using the png files
list.files(path=jessie_dr, pattern = '^HAZARD_WEATHER_FLOOD', full.names = TRUE) %>%
image_read() %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 0.5) %>% # animates, can opt for number of loops
image_write(file.path(jessie_dr, paste0(subtype,".gif"))) # write to current dir
for (y in as.character(unique(dt$date[!is.na(dt$date)]))) {
subtype = "HAZARD_WEATHER_FLOOD"
gp <- dt %>%
filter(date == y & sub_type == subtype)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
#facet_wrap(~ sub_type) +
ggtitle(paste0(subtype," ", y))
fp <- file.path(jessie_dr, paste0(subtype," ", y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png", width=10, height=8, dpi=300)
}
# make a gif using the png files
list.files(path=jessie_dr, pattern = '^HAZARD_WEATHER_FLOOD', full.names = TRUE) %>%
image_read() %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 0.5) %>% # animates, can opt for number of loops
image_write(file.path(jessie_dr, paste0(subtype,".gif"))) # write to current dir
subtype = "HAZARD_WEATHER_FLOOD"
y
dt %>%
filter(date == y & sub_type == subtype)
length(dt %>%
filter(date == y & sub_type == subtype)) != 0
length(dt %>%
filter(date == y & sub_type == subtype))
dt %>%
filter(date == y & sub_type == subtype)
dim(dt %>%
filter(date == y & sub_type == subtype))[1]
# make a gif with only one sub-type
for (y in as.character(unique(dt$date[!is.na(dt$date)]))) {
subtype = "HAZARD_WEATHER_FLOOD"
if (dim(dt %>%
filter(date == y & sub_type == subtype))[1] != 0){
gp <- dt %>%
filter(date == y & sub_type == subtype)  %>%
ggplot(aes(long, lat, group = group, text = paste(date,":",sub_type))) +
geom_polygon(aes(fill = sum_waze_counts), color = "gray70") +
coord_map() + scale_colour_manual(values = rev(brewer.pal(3, "BuPu"))) +
#facet_wrap(~ sub_type) +
ggtitle(paste0(subtype," ", y))
fp <- file.path(jessie_dr, paste0(subtype," ", y, ".png"))
ggsave(plot = gp,
filename = fp,
device = "png", width=10, height=8, dpi=300)
}
}
list.files(path=jessie_dr, pattern = '^HAZARD_WEATHER_FLOOD', full.names = TRUE) %>%
image_read() %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 0.5) %>% # animates, can opt for number of loops
image_write(file.path(jessie_dr, paste0(subtype,".gif"))) # write to current dir
